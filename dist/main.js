(()=>{function e(e,a,t){return{length:e,hitList:a,sunk:t,placement:[],hit:e=>(a.push(e),a),isSunk:()=>a.length===e&&(t=!0,!0)}}const a=()=>{let e=[[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]]],a=[],t=[];return{gameBoardArray:e,placeShip(t,r,n){for(let a=0;a<r.length;a++)e[n[0]-1][n[1]-1+a]=[n[0],n[1]+a],l.fillCell(t,n,a,"gray"),r.placement.push([n[0],n[1]+a]);return a.push(r),e[n[0]-1]},receiveAttack(l){const r=e[l[0]-1][l[1]-1];if(0===r.length)return t.push(l),!1;if(JSON.stringify(r)===JSON.stringify(l)){let e;for(let t=0;t<a.length;t++)a[t].placement.forEach((a=>{JSON.stringify(a)===JSON.stringify(l)&&(e=t)}));return a[e].hitList.push(l),a[e].isSunk()&&(a[e].sunk=!0),console.log(a),!0}},checkAllShips(){let e=0;return a.forEach((a=>{a.sunk&&e++})),e===a.length},missedAttackList:t}};function t(e,a){return{name:e,playerGameBoard:a,generateAttack:function(){return[Math.floor(10*Math.random()+1),Math.floor(10*Math.random()+1)]}}}const l=(()=>{function e(e,a,t,l){let r=10*(a[0]-1)+(a[1]+t-1);document.querySelectorAll(`.${e}-gameboard-cell`)[r].style.backgroundColor=l}function a(e){document.querySelector(".message-bar-content").textContent=e}return{generateGameBoard:function(e){const a=document.createElement("div");a.classList.add("gameboard");for(let t=0;t<100;t++){const t=document.createElement("div");t.classList.add(e+"-gameboard-cell","gameboard-cell"),a.appendChild(t)}document.querySelector(".gameboards-container").appendChild(a)},fillCell:e,addAttackEventListener:function(t){const l=document.querySelectorAll(`.${t.name}-gameboard-cell`);for(let n=0;n<l.length;n++)l[n].addEventListener("click",(()=>{console.log(n);const l=[Math.floor(n/10+1),n%10+1];t.playerGameBoard.receiveAttack(l)?(e(t.name,l,0,"red"),a("Hit!")):e(t.name,l,0,"blue"),console.log(t),setTimeout((()=>r.gameLoop()),2e3)}))},displayMessage:a}})(),r=(()=>{let r="brandon",n="ai",o=t(r,a()),c=t(n,a());l.generateGameBoard("brandon"),l.generateGameBoard("ai"),l.addAttackEventListener(c),o.playerGameBoard.placeShip(r,e(5,[],!1),[4,2]),o.playerGameBoard.placeShip(r,e(4,[],!1),[1,1]),o.playerGameBoard.placeShip(r,e(4,[],!1),[8,5]),o.playerGameBoard.placeShip(r,e(3,[],!1),[6,2]),o.playerGameBoard.placeShip(r,e(2,[],!1),[3,7]),c.playerGameBoard.placeShip(n,e(5,[],!1),[4,2]),c.playerGameBoard.placeShip(n,e(4,[],!1),[1,1]),c.playerGameBoard.placeShip(n,e(4,[],!1),[8,5]),c.playerGameBoard.placeShip(n,e(3,[],!1),[6,2]),c.playerGameBoard.placeShip(n,e(2,[],!1),[9,7]);let i=!1;return{gameLoop:function(){if(!i){let e=c.generateAttack();o.playerGameBoard.receiveAttack(e)?l.fillCell(o.name,e,0,"red"):l.fillCell(o.name,e,0,"blue"),console.log(e),i=!0}c.playerGameBoard.checkAllShips()&&console.log("game over!"),i=!1,console.log(o),console.log(c)}}})()})();