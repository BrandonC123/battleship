(()=>{function e(e,a,t){return{length:e,hitList:a,sunk:t,placement:[],hit:e=>(a.push(e),a),isSunk:()=>a.length===e&&(t=!0,!0)}}const a=()=>{let e=[[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]]],a=[],t=[];return{gameBoardArray:e,placeShip(t,l,o){for(let a=0;a<l.length;a++)e[o[0]-1][o[1]-1+a]=[o[0],o[1]+a],r.fillShipCell(t,o,a),l.placement.push([o[0],o[1]+a]);return a.push(l),e[o[0]-1]},receiveAttack(r){const l=e[r[0]-1][r[1]-1];if(0===l.length)return t.push(r),!1;if(JSON.stringify(l)===JSON.stringify(r)){let e;for(let t=0;t<a.length;t++)a[t].placement.forEach((a=>{JSON.stringify(a)===JSON.stringify(r)&&(e=t)}));return a[e].hitList.push(r),a[e].isSunk()&&(a[e].sunk=!0),console.log(a),!0}},checkAllShips(){let e=0;return a.forEach((a=>{a.sunk&&e++})),e===a.length},missedAttackList:t}};function t(e,a){return{name:e,playerGameBoard:a,generateAttack:function(){return[Math.floor(10*Math.random()+1),Math.floor(10*Math.random()+1)]}}}const r={generateGameBoard:function(e){const a=document.createElement("div");a.classList.add("gameboard");for(let t=0;t<100;t++){const t=document.createElement("div");t.classList.add(e+"-gameboard-cell","gameboard-cell"),a.appendChild(t)}document.querySelector(".gameboards-container").appendChild(a)},fillShipCell:function(e,a,t){let r=10*(a[0]-1)+(a[1]+t-1);document.querySelectorAll(`.${e}-gameboard-cell`)[r].style.backgroundColor="gray"},addAttackEventListener:function(e){const a=document.querySelectorAll(`.${e.name}-gameboard-cell`);for(let t=0;t<a.length;t++)a[t].addEventListener("click",(()=>{console.log(t);const a=[Math.floor(t/10+1),t%10+1];e.playerGameBoard.receiveAttack(a),console.log(e),l.gameLoop()}))}},l=(()=>{let l="brandon",o="ai",n=t(l,a()),c=t(o,a());r.generateGameBoard("brandon"),r.generateGameBoard("ai"),r.addAttackEventListener(c),n.playerGameBoard.placeShip(l,e(5,[],!1),[4,2]),n.playerGameBoard.placeShip(l,e(4,[],!1),[1,1]),n.playerGameBoard.placeShip(l,e(4,[],!1),[8,5]),n.playerGameBoard.placeShip(l,e(3,[],!1),[6,2]),n.playerGameBoard.placeShip(l,e(2,[],!1),[3,7]),c.playerGameBoard.placeShip(o,e(5,[],!1),[4,2]),c.playerGameBoard.placeShip(o,e(4,[],!1),[1,1]),c.playerGameBoard.placeShip(o,e(4,[],!1),[8,5]),c.playerGameBoard.placeShip(o,e(3,[],!1),[6,2]),c.playerGameBoard.placeShip(o,e(2,[],!1),[9,7]);let i=!0;return{gameLoop:function(){if(!i){let e=c.generateAttack();n.playerGameBoard.receiveAttack(e),i=!0}c.playerGameBoard.checkAllShips()&&console.log("game over!"),i=!1,console.log(n),console.log(c)}}})()})();