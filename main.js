(()=>{function e(e,a,t){return{length:e,hitList:a,sunk:t,placement:[],hit:e=>(a.push(e),a),isSunk:()=>a.length===e&&(t=!0,!0)}}const a=()=>{let e=[[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]]],a=[],t=[];return{gameBoardArray:e,placeShip(t,o,r){for(let a=0;a<o.length;a++)e[r[0]-1][r[1]-1+a]=[r[0],r[1]+a],l.fillCell(t,r,a,"gray"),o.placement.push([r[0],r[1]+a]);return a.push(o),e[r[0]-1]},receiveAttack(l){const o=e[l[0]-1][l[1]-1];if(0===o.length)return t.push(l),!1;if(JSON.stringify(o)===JSON.stringify(l)){let e;for(let t=0;t<a.length;t++)a[t].placement.forEach((a=>{JSON.stringify(a)===JSON.stringify(l)&&(e=t)}));return a[e].hitList.push(l),a[e].isSunk()&&(a[e].sunk=!0),console.log(a),!0}},checkAllShips(){let e=0;return a.forEach((a=>{a.sunk&&e++})),e===a.length},missedAttackList:t}};function t(e,a){return{name:e,playerGameBoard:a,generateAttack:function(){return[Math.floor(10*Math.random()+1),Math.floor(10*Math.random()+1)]}}}const l=(()=>{function e(e,a,t,l){let o=10*(a[0]-1)+(a[1]+t-1);document.querySelectorAll(`.${e}-gameboard-cell`)[o].style.backgroundColor=l}function a(a,t){a.playerGameBoard.receiveAttack(t)?(e(a.name,t,0,"red"),l("Hit!")):e(a.name,t,0,"blue")}function t(e){document.querySelectorAll(`.${e}-gameboard-cell`).forEach((e=>{e.classList.toggle("inactive-cell")}))}function l(e){document.querySelector(".message-bar-content").textContent=e}return{generateGameBoard:function(e){const a=document.createElement("div");a.classList.add("gameboard");for(let t=0;t<100;t++){const t=document.createElement("div");t.classList.add(e+"-gameboard-cell","gameboard-cell"),a.appendChild(t)}document.querySelector(".gameboards-container").appendChild(a)},fillCell:e,fillAttackCell:a,addAttackEventListener:function(e){const l=document.querySelectorAll(`.${e.name}-gameboard-cell`);for(let r=0;r<l.length;r++)l[r].addEventListener("click",(()=>{console.log(r);const l=[Math.floor(r/10+1),r%10+1];a(e,l),console.log(e),t(e.name),setTimeout((()=>o.gameLoop()),2e3)}))},toggleGameBoard:t,displayMessage:l}})(),o=(()=>{let o="brandon",r="ai",n=t(o,a()),c=t(r,a());l.generateGameBoard("brandon"),l.generateGameBoard("ai"),l.addAttackEventListener(c),n.playerGameBoard.placeShip(o,e(5,[],!1),[4,2]),n.playerGameBoard.placeShip(o,e(4,[],!1),[1,1]),n.playerGameBoard.placeShip(o,e(4,[],!1),[8,5]),n.playerGameBoard.placeShip(o,e(3,[],!1),[6,2]),n.playerGameBoard.placeShip(o,e(2,[],!1),[3,7]),c.playerGameBoard.placeShip(r,e(5,[],!1),[4,2]),c.playerGameBoard.placeShip(r,e(4,[],!1),[1,1]),c.playerGameBoard.placeShip(r,e(4,[],!1),[8,5]),c.playerGameBoard.placeShip(r,e(3,[],!1),[6,2]),c.playerGameBoard.placeShip(r,e(2,[],!1),[9,7]);let i=!1;return{gameLoop:function(){if(!i){let e=c.generateAttack();l.fillAttackCell(n,e),console.log(e),i=!0,l.toggleGameBoard(r)}c.playerGameBoard.checkAllShips()&&console.log("game over!"),i=!1,console.log(n),console.log(c)}}})()})();